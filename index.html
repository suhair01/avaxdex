<!-- ... keep existing <head> ... -->
<body>
  <div class="container">
    <h2>ðŸŒ€ Arena Swap (with Live Tokens)</h2>
    <div class="token-box">
      <label>From: AVAX</label><br>
      <input id="avaxAmount" placeholder="Enter AVAX amount" />
    </div>
    <div class="token-box">
      <label>To:</label><br>
      <select id="tokenOutSelect"></select>
    </div>
    <button class="btn" onclick="connect()">Connect Wallet</button>
    <p id="walletStatus">Not connected</p>
    <button class="btn" onclick="swap()">Swap</button>
  </div>

  <script>
    const routerAddress = "0x9BbBBddA44a24E1288d168aC0582271C5C89f2FD";
    const wavax = "0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7";
    const abi = [
      "function swapExactAVAXForTokensSupportingFeeOnTransferTokens(uint,uint,address[],address,uint)"
    ];

    let provider, signer, router;
    const select = document.getElementById("tokenOutSelect");

    async function loadTokens() {
      const res = await fetch("https://api.coingecko.com/api/v3/coins/avalanche-2/contract_addresses");
      // This endpoint lists Avalanche ecosystem top tokens :contentReference[oaicite:3]{index=3}
      const list = await res.json();
      // Fallback small hardcoded list if API doesnâ€™t return full mapping
      const tokens = [
        { name: "Arena", symbol: "ARENA", address: "0xb8d7710f7d8349a506b75dd184f05777c82dad0c", logo: "" },
        { name: "Chainlink", symbol: "LINK", address: "0x...", logo: "" },
        { name: "Aave", symbol: "AAVE", address: "0x...", logo: "" }
      ];
      tokens.forEach(t => {
        const o = document.createElement("option");
        o.value = t.address;
        o.text = `${t.symbol} â€“ ${t.name}`;
        select.add(o);
      });
    }

    async function connect() {
      if (!window.ethereum) return alert("Install MetaMask");
      await ethereum.request({ method: "eth_requestAccounts" });
      provider = new ethers.BrowserProvider(window.ethereum);
      signer = await provider.getSigner();
      router = new ethers.Contract(routerAddress, abi, signer);
      document.getElementById("walletStatus").innerText = "Connected: " + await signer.getAddress();
    }

    async function swap() {
      const avaxAmt = document.getElementById("avaxAmount").value;
      const tokenTo = select.value;
      const path = [wavax, tokenTo];
      const to = await signer.getAddress();
      const deadline = Math.floor(Date.now() / 1000) + 600;

      try {
        const tx = await router.swapExactAVAXForTokensSupportingFeeOnTransferTokens(
          0, path, to, deadline,
          { value: ethers.parseEther(avaxAmt) }
        );
        alert("Swap sent: " + tx.hash);
      } catch (e) {
        alert("Swap failed: " + e.message);
      }
    }

    window.addEventListener('load', loadTokens);
  </script>
</body>
</html>
